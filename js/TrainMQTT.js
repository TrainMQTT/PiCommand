var Engine=function(){function d(c){var a=c.speedSteps+0;Object.defineProperty(c,"speedSteps",{set:function(c){this.speed*=c/this.speedSteps;a=c},get:function(){return a}})}if("function"===typeof require)var b=require("./engineFunction");var a=function(){for(var c,a,b=0;b<arguments.length;b++){var e=arguments[b];if("string"==typeof e||"number"===typeof e)c=e;"object"==typeof e&&(a=e)}this.type="Engine";this._rev=this._id=null;this.address=c||3;this.speed=0;this.speedSteps=28;this.lightOn=!1;this.direction=
1;this._functions={};a=a||{};this.applyProperties(a);d(this);Object.defineProperty(this,"throttle",{get:function(){var a=this.speed/this.speedSteps*this.direction;isNaN(a)&&(a=0);return a},set:function(a){0<a&&(this.direction=1);0>a&&(this.direction=-1,a*=-1);1<a&&(a/=100);this.speed=Math.floor(this.speedSteps*a)}});return this};a.prototype.applyProperties=function(a){Object.keys(a).forEach(function(b){this[b]=a[b]},this)};a.prototype.toggleLight=function(){this.lightOn=!this.lightOn;return this};
a.prototype.stop=function(){this.speed=0;return this};a.prototype.switchDirection=function(){switch(this.direction){case -1:this.direction=1;break;case 1:this.direction=-1}return this};a.prototype.addFunction=function(a,d,f){return"function"===typeof b?(f=f||a,a=new b(f,this.cab,a,d),this._functions[f]=a):this};a.prototype.getFunction=function(a){return this._functions[a]};"undefined"!==typeof module&&(module.exports=a);return a}();var TrainMQTTMessage=function(){var d=function(){this.serializeObject=function(b){var a=this.filterMethods(b),c=[];Object.keys(a).forEach(function(b){c.push(b+"="+a[b])});return c.join("&")};this.filterMethods=function(b){var a={};Object.keys(b).forEach(function(c){if(void 0===b[c]||null===b[c]||"function"===typeof b[c].toString&&"[object Object]"!==b[c].toString())a[c]=b[c]});return a};return this};"undefined"!==typeof module&&(module.exports=d);return new d}();var Power=function(){if("function"===typeof require)var d=require("./trainMQTTMessage");var b=function(a){this.type="Power";a=a.toString();"false"===a&&(a="0");"true"===a&&(a="1");this.state=(a=parseInt(a))||0;return this};b.prototype.on=function(){this.state=1};b.prototype.off=function(){this.state=0};b.prototype.toMQTT=function(){return d?d.prototype.serializeObject(this):null};"undefined"!==typeof module&&(module.exports=b);return b}();
